import tkinter as tk
from tkinter.filedialog import askopenfilename
import os.path
import tkinter.messagebox
import malwareTest

class Application(tk.Frame):
    def getResult(self):
        for x in self.outputFrame.grid_slaves():
            x.destroy()
        if (os.path.exists(self.entry.get()) and os.path.isfile(self.entry.get())):
            tk.Label(self.outputFrame, text=malwareTest.detect(self.entry.get())).grid()
        else:
            tk.messagebox.showerror("Error", "File Does Not Exist")

    def selectClick(self, event=None):
        filename = askopenfilename()
        self.entry.delete(0, len(self.entry.get()))
        self.entry.insert(0, filename)

    def __init__(self, master=None):
        tk.Frame.__init__(self, master)
        self.grid()
        self.createWidgets()

    def createWidgets(self):
        top = self.winfo_toplevel()
        top.columnconfigure(0, weight=1)
        self.rowconfigure(0, weight=1)
        self.columnconfigure(0, weight=1)
        self.mainLabel = tk.Label(self, text="Select File")
        self.mainLabel.grid(row=0, columnspan=2, padx=10, pady=10)
        self.entry = tk.Entry(self, bd=1, width=200)
        self.entry.grid(row=1, padx=10, pady=10)
        self.quitButton = tk.Button(self, text='Select', command=self.selectClick)
        self.quitButton.grid(row=1, column=1, padx=10, pady=10)
        self.result = tk.Button(self, text="Scan", command=self.getResult)
        self.result.grid(row=2, columnspan=2, padx=10, pady=10)
        self.outputFrame = tk.Frame(self)
        self.outputFrame.grid(row=3, columnspan=2, padx=10, pady=10)


app = Application()
app.master.title('Malware Detection')
app.master.geometry("{}x{}".format(600, 300))
app.master.minsize(400, 300)
app.master.iconphoto(True, tk.PhotoImage(file='MyIcon.png'))
app.mainloop()
